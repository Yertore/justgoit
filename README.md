# justgoit

GitHub
  ‚Üì (push)
GitHub Actions (CI)
  ‚Üì
Docker image
  ‚Üì
VPS (ps.kz)
  ‚Üì
Docker container
  ‚Üì
Domain + HTTPS

Coommands:
docker build -t justgoit-backend .
docker run -p 8089:8089 justgoit-backend

docker compose down -v 
docker compose up -d --build


üß† –û–ë–©–ê–Ø –ö–ê–†–¢–ò–ù–ê (–°–ù–ê–ß–ê–õ–ê –°–£–¢–¨)
–¢—ã —Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏–∑ –º–∏—Ä–∞:
  Clean Architecture
  Hexagonal / Ports & Adapters
  DDD-lite (Domain Driven Design)

üëâ –î–∞–∂–µ –µ—Å–ª–∏ —Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å DDD –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ, –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ç–µ –∂–µ.

–ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –∂–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (HTTP, –ë–î, Docker, Gin ‚Äî —ç—Ç–æ –¥–µ—Ç–∞–ª–∏)

1Ô∏è‚É£ domain ‚Äî –ß–¢–û –≠–¢–û –í–û–û–ë–©–ï –¢–ê–ö–û–ï?
‚ùì –ü–æ—á–µ–º—É domain, –∞ –Ω–µ models –∏–ª–∏ types
Domain (–¥–æ–º–µ–Ω) ‚Äî —ç—Ç–æ: –ø—Ä–µ–¥–º–µ—Ç–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –±–∏–∑–Ω–µ—Å–∞
–í —Ç–≤–æ—ë–º –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–º–µ–Ω ‚Äî —ç—Ç–æ:
  –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è Go-–∏–Ω—Ç–µ—Ä–≤—å—é
  –∏—Ö —Å–ª–æ–∂–Ω–æ—Å—Ç—å
  –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å
  –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

üìå Question ‚Äî —ç—Ç–æ –ù–ï —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –∏ –ù–ï JSON
type Question struct {
	ID         int64
	Title      string
	Answer     string
	Level      string
	Category   string
	Popularity int
	CreatedAt  time.Time
}

–≠—Ç–æ:
‚ùå –Ω–µ —Ç–∞–±–ª–∏—Ü–∞
‚ùå –Ω–µ API-–æ—Ç–≤–µ—Ç
‚ùå –Ω–µ DTO
üëâ –≠—Ç–æ —Å—É—â–Ω–æ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞:

¬´–í–æ–ø—Ä–æ—Å –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é¬ª
‚ùì –ü–æ—á–µ–º—É –Ω–µ models?
models ‚Äî —Ä–∞–∑–º—ã—Ç–æ:
  –º–æ–¥–µ–ª—å –ë–î?
  –º–æ–¥–µ–ª—å API?
  –º–æ–¥–µ–ª—å —Ñ–æ—Ä–º—ã?
domain ‚Äî —á—ë—Ç–∫–æ:
  –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç—å
  –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –Ω–∏ –æ—Ç —á–µ–≥–æ

üìå –í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö:
models ‚Äî —á–∞—â–µ legacy
domain ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç

2Ô∏è‚É£ repository ‚Äî –ó–ê–ß–ï–ú –û–ù –í–û–û–ë–©–ï?
‚ùì –ü–æ—á–µ–º—É interface, –∞ –Ω–µ –∫–æ–¥ –ë–î?
type QuestionRepository interface {
	Create(ctx context.Context, q *domain.Question) error
	GetByID(ctx context.Context, id int64) (*domain.Question, error)
	List(ctx context.Context) ([]domain.Question, error)
}

üìå Repository = ¬´–•—Ä–∞–Ω–∏–ª–∏—â–µ¬ª

–û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: –ì–¥–µ –∏ –∫–∞–∫ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã ‚Äî –º–Ω–µ –≤—Å—ë —Ä–∞–≤–Ω–æ

Service –ù–ï –ó–ù–ê–ï–¢:
  PostgreSQL —ç—Ç–æ
  Redis
  Mongo
  –ø–∞–º—è—Ç—å
  —Ñ–∞–π–ª

‚ùó –ì–ª–∞–≤–Ω–æ–µ:
Service –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –∞ –Ω–µ –æ—Ç Postgres

–≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø: High-level modules –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç low-level modules

3Ô∏è‚É£ –ü–æ—á–µ–º—É –î–í–ê question_repository.go? –≠—Ç–æ –Ω–µ –ø—É—Ç–∞–Ω–∏—Ü–∞?
–¢—ã –ø—Ä–∞–≤ ‚Äî –≤–æ–ø—Ä–æ—Å –ª–æ–≥–∏—á–Ω—ã–π üëå
–î–∞–≤–∞–π —Ä–∞–∑–ª–æ–∂–∏–º.
repository/
‚îú‚îÄ‚îÄ question_repository.go        ‚Üê –ö–û–ù–¢–†–ê–ö–¢
‚îî‚îÄ‚îÄ postgres/
    ‚îî‚îÄ‚îÄ question_repository.go    ‚Üê –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

üß† –ö–∞–∫ —ç—Ç–æ —á–∏—Ç–∞–µ—Ç—Å—è:
repository/question_repository.go -> ¬´–í–æ—Ç –ß–¢–û –º—ã –º–æ–∂–µ–º –¥–µ–ª–∞—Ç—å —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏¬ª
repository/postgres/question_repository.go -> ¬´–í–æ—Ç –ö–ê–ö –º—ã —ç—Ç–æ –¥–µ–ª–∞–µ–º –≤ PostgreSQL¬ª

‚ùì –ü–æ—á–µ–º—É –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∏–º—è?
–ü–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –æ–¥–Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –≤–µ—â—å, –Ω–æ:
  –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö
  —Å —Ä–∞–∑–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é

üìå –í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö —ç—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
(–¥–∞, —Å–Ω–∞—á–∞–ª–∞ –Ω–µ–ø—Ä–∏–≤—ã—á–Ω–æ)

4Ô∏è‚É£ service ‚Äî –ó–ê–ß–ï–ú –û–ù, –ï–°–õ–ò –ï–°–¢–¨ REPOSITORY?
‚ùå –ü–ª–æ—Ö–∞—è –∏–¥–µ—è (—á–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞ –Ω–æ–≤–∏—á–∫–æ–≤)
HTTP ‚Üí Repository ‚Üí DB

–ü–æ—á–µ–º—É –ø–ª–æ—Ö–æ?
  –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–∞–∑–º–∞–∑–∞–Ω–∞
  —Å–ª–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞
  –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
HTTP ‚Üí Service ‚Üí Repository ‚Üí DB

Service ‚Äî —ç—Ç–æ: –º–æ–∑–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–û–Ω —Ä–µ—à–∞–µ—Ç:
  –º–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å
  –¥–æ–ø—É—Å—Ç–∏–º –ª–∏ —É—Ä–æ–≤–µ–Ω—å
  –∫–∞–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
  –∫–∞–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω–∏—Ç—å

üìå Service —Ä–∞—Å—Ç—ë—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º, repository ‚Äî –Ω–µ—Ç.

5Ô∏è‚É£ handler ‚Äî –ó–ê–ß–ï–ú –û–ù?
Handler = HTTP-–∞–¥–∞–ø—Ç–µ—Ä

–û–Ω:
  —á–∏—Ç–∞–µ—Ç JSON
  –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥
  –ø–µ—Ä–µ–≤–æ–¥–∏—Ç HTTP ‚Üí domain
  –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP-–æ—Ç–≤–µ—Ç
  HTTP ‚Äî —ç—Ç–æ –¢–†–ê–ù–°–ü–û–†–¢

Handler –ù–ï –î–û–õ–ñ–ï–ù:
  –∑–Ω–∞—Ç—å –ø—Ä–æ –ë–î
  –∑–Ω–∞—Ç—å –ø—Ä–æ SQL
  —Å–æ–¥–µ—Ä–∂–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

–ü–æ—á–µ–º—É –Ω–µ –ø–∏—Å–∞—Ç—å –≤—Å—ë –≤ handler?
–ü–æ—Ç–æ–º—É —á—Ç–æ —Ç–æ–≥–¥–∞:
  –Ω–µ–ª—å–∑—è –∑–∞–º–µ–Ω–∏—Ç—å Gin
  –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å gRPC
  –Ω–µ–ª—å–∑—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

6Ô∏è‚É£ router ‚Äî –ü–û–ß–ï–ú–£ –û–¢–î–ï–õ–¨–ù–û?
func SetupRouter(qh *handlers.QuestionHandler) *gin.Engine

Router:
—Å–≤—è–∑—ã–≤–∞–µ—Ç URL ‚Üí handler
–Ω–µ –∑–Ω–∞–µ—Ç:
  –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–î
  —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ handler
  –ü–æ—á–µ–º—É –Ω–µ –≤ main.go?

main.go –¥–æ–ª–∂–µ–Ω:
  —Å–æ–±–∏—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä
üëâ –Ω–µ –æ–ø–∏—Å—ã–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã

7Ô∏è‚É£ DI ‚Äî Dependency Injection (–°–ê–ú–û–ï –í–ê–ñ–ù–û–ï)
–¢–µ–ø–µ—Ä—å –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç, –±–µ–∑ –Ω–µ–≥–æ –≤—Å—ë –≤—ã—à–µ ‚Äî –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ.
‚ùì –ß—Ç–æ —Ç–∞–∫–æ–µ DI –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
Dependency Injection =
¬´–Ø –Ω–µ —Å–æ–∑–¥–∞—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–∏, –º–Ω–µ –∏—Ö –ü–ï–†–ï–î–ê–Æ–¢¬ª

‚ùå –ë–µ–∑ DI (–ø–ª–æ—Ö–æ)
type QuestionService struct {}

func (s *QuestionService) Create(q Question) {
	repo := postgres.NewQuestionRepository() // ‚ùå
	repo.Create(q)
}

–ü—Ä–æ–±–ª–µ–º—ã:
  —Å–µ—Ä–≤–∏—Å –∂—ë—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ Postgres
  –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
  –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –ë–î
  –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

‚úÖ –° DI (–∫–∞–∫ —É —Ç–µ–±—è)
repo := postgres.NewQuestionRepository(pool)
svc := service.NewQuestionService(repo)
handler := handlers.NewQuestionHandler(svc)

–ß–∏—Ç–∞–µ—Ç—Å—è —Ç–∞–∫:
  repository ‚Üí –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
  service ‚Üí –±–∏–∑–Ω–µ—Å
  handler ‚Üí —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
üëâ –ö–∞–∂–¥—ã–π —Å–ª–æ–π –ù–ï –ó–ù–ê–ï–¢, –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω –Ω–∏–∂–Ω–∏–π

üß† –ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏ (–í–ê–ñ–ù–û)
‚ùå –ë–µ–∑ DI
  –¢—ã –∫—É–ø–∏–ª —á–∞–π–Ω–∏–∫ —Å –ø—Ä–∏–≤–∞—Ä–µ–Ω–Ω–æ–π —Ä–æ–∑–µ—Ç–∫–æ–π
  –Ω–µ –º–æ–∂–µ—à—å —Å–º–µ–Ω–∏—Ç—å —Ä–æ–∑–µ—Ç–∫—É
  –Ω–µ –º–æ–∂–µ—à—å —á–∏–Ω–∏—Ç—å
  –Ω–µ –º–æ–∂–µ—à—å –∑–∞–º–µ–Ω–∏—Ç—å

‚úÖ –° DI
–¢—ã –ø–æ–¥–∫–ª—é—á–∞–µ—à—å —á–∞–π–Ω–∏–∫ –∫ —Ä–æ–∑–µ—Ç–∫–µ
—Ä–æ–∑–µ—Ç–∫–∞ ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å

‚ùì –ß—Ç–æ –±—ã–ª–æ –±—ã –±–µ–∑ DI
  –æ–≥—Ä–æ–º–Ω—ã–π main.go
  SQL –≤ handlers
  –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
  –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω —Ä–æ—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞
  –±–æ–ª—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

üìå 99% "–≥–æ–≤–Ω–æ–∫–æ–¥–∞" –≤ –ø—Ä–æ–¥–µ ‚Äî —ç—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ DI

üü¢ –†–ï–ó–Æ–ú–ï (–ó–ê–ü–û–ú–ù–ò –≠–¢–û)
–ü–∞–ø–∫–∞	      –°—É—Ç—å
domain	    –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏
repository	–ö–ê–ö —Ö—Ä–∞–Ω–∏–º
service	    –ß–¢–û —Ä–µ—à–∞–µ–º
handlers	  HTTP
router	    URL ‚Üí handler
DI	        —Å–∫–ª–µ–∏–≤–∞–µ—Ç –≤—Å—ë